(self.webpackChunkmianpix=self.webpackChunkmianpix||[]).push([[326],{174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var i=a(43),n=a(12),s=a(905),r=a(555),o=a(789),l=a(774),c=a(579);const d=e=>{let{onImageLoad:t}=e;const[a,n]=(0,i.useState)(""),{getRootProps:s,getInputProps:d,isDragActive:h}=(0,o.VB)({onDrop:e=>{if(e&&e.length>0){const a=e[0],i=new FileReader;i.onload=e=>{t(e.target.result)},i.readAsDataURL(a)}},accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]},multiple:!1}),u=()=>{a&&(t(a),n(""))};return(0,c.jsxs)("div",{className:"image-upload",children:[(0,c.jsxs)("div",(0,r.A)((0,r.A)({},s()),{},{className:"dropzone ".concat(h?"active":""),children:[(0,c.jsx)("input",(0,r.A)({},d())),(0,c.jsx)(l.HVe,{size:48}),(0,c.jsx)("p",{children:"Drag & drop an image here, or click to select"}),(0,c.jsx)("p",{className:"supported-formats",children:"Supports: PNG, JPG, JPEG, GIF, WEBP"})]})),(0,c.jsxs)("div",{className:"url-upload",children:[(0,c.jsx)(l.AnD,{}),(0,c.jsx)("input",{type:"text",placeholder:"Or paste image URL here",value:a,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&u()}),(0,c.jsx)("button",{onClick:u,children:"Load"})]})]})};var h=a(586);a(576);const u=e=>{let{imageSrc:t,onReset:a}=e;const[s,r]=(0,i.useState)(0),[o,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),[x,g]=(0,i.useState)(""),[m,j]=(0,i.useState)(""),[v,y]=(0,i.useState)(.9),[w,b]=(0,i.useState)(),[C,N]=(0,i.useState)(),[P,f]=(0,i.useState)(!1),[R,S]=(0,i.useState)("png"),k=(0,i.useRef)(null);(0,i.useEffect)(()=>{k.current&&(g(Math.round(k.current.naturalWidth)),j(Math.round(k.current.naturalHeight)))},[t]);const L=()=>({transform:"rotate(".concat(s,"deg) scaleX(").concat(o?-1:1,") scaleY(").concat(u?-1:1,")"),maxWidth:"100%",maxHeight:"70vh",borderRadius:"12px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",transition:"transform 0.3s ease"});return(0,c.jsxs)(n.P.div,{className:"image-editor",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:[(0,c.jsxs)(n.P.div,{className:"controls-panel",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4},children:[(0,c.jsxs)("div",{className:"control-group",children:[(0,c.jsx)("h3",{children:"Transform"}),(0,c.jsxs)("button",{onClick:()=>r((s+90)%360),title:"Rotate 90\xb0",children:[(0,c.jsx)(l.Swo,{})," Rotate"]}),(0,c.jsxs)("button",{onClick:()=>d(!o),title:"Flip Horizontal",children:[(0,c.jsx)(l.veh,{})," Flip H"]}),(0,c.jsxs)("button",{onClick:()=>p(!u),title:"Flip Vertical",children:[(0,c.jsx)(l.J42,{})," Flip V"]}),(0,c.jsxs)("button",{onClick:()=>f(!P),title:"Crop",children:[(0,c.jsx)(l.QmF,{})," ",P?"Done Crop":"Crop"]})]}),(0,c.jsxs)("div",{className:"control-group",children:[(0,c.jsx)("h3",{children:"Resize"}),(0,c.jsxs)("label",{children:["Width: ",(0,c.jsx)("input",{type:"number",value:x,onChange:e=>g(e.target.value)})]}),(0,c.jsxs)("label",{children:["Height: ",(0,c.jsx)("input",{type:"number",value:m,onChange:e=>j(e.target.value)})]})]}),(0,c.jsxs)("div",{className:"control-group",children:[(0,c.jsx)("h3",{children:"Compression"}),(0,c.jsxs)("label",{children:["Quality: ",Math.round(100*v),"%",(0,c.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:v,onChange:e=>y(parseFloat(e.target.value))})]})]}),(0,c.jsxs)("div",{className:"control-group",children:[(0,c.jsx)("h3",{children:"Format"}),(0,c.jsxs)("select",{value:R,onChange:e=>S(e.target.value),children:[(0,c.jsx)("option",{value:"png",children:"PNG"}),(0,c.jsx)("option",{value:"jpg",children:"JPG"}),(0,c.jsx)("option",{value:"webp",children:"WEBP"})]})]}),(0,c.jsxs)("div",{className:"control-group actions",children:[(0,c.jsxs)("button",{className:"download-btn",onClick:()=>{const e=(()=>{const e=k.current;if(!e)return null;const t=document.createElement("canvas"),a=t.getContext("2d");let i=x||e.naturalWidth,n=m||e.naturalHeight;if(90===s||270===s?(t.width=n,t.height=i):(t.width=i,t.height=n),a.save(),a.translate(t.width/2,t.height/2),a.rotate(s*Math.PI/180),a.scale(o?-1:1,u?-1:1),C&&P){const i=e.naturalWidth/e.width,n=e.naturalHeight/e.height;t.width=C.width*i,t.height=C.height*n,a.drawImage(e,C.x*i,C.y*n,C.width*i,C.height*n,-t.width/2,-t.height/2,t.width,t.height)}else a.drawImage(e,-i/2,-n/2,i,n);return a.restore(),t})();if(!e)return;const t="jpg"===R?"image/jpeg":"image/".concat(R);e.toBlob(e=>{const t=URL.createObjectURL(e),a=document.createElement("a");a.download="mianpix-edited.".concat(R),a.href=t,a.click(),URL.revokeObjectURL(t)},t,v)},children:[(0,c.jsx)(l.WCW,{})," Download"]}),(0,c.jsx)("button",{className:"reset-btn",onClick:a,children:"Reset Image"})]})]}),(0,c.jsxs)(n.P.div,{className:"preview-panel",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4},children:[(0,c.jsx)("h3",{children:"Preview"}),P?(0,c.jsx)(h.Ay,{crop:w,onChange:e=>b(e),onComplete:e=>N(e),children:(0,c.jsx)("img",{ref:k,src:t,alt:"Preview",style:L()})}):(0,c.jsx)("img",{ref:k,src:t,alt:"Preview",style:L()})]})]})},p=()=>{const[e,t]=(0,i.useState)(null);return(0,c.jsx)(n.P.div,{className:"tool-page",variants:s.pageVariants,initial:"initial",animate:"animate",exit:"exit",children:(0,c.jsx)("div",{className:"tool-container",children:e?(0,c.jsx)(n.P.div,{className:"editor-section",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},children:(0,c.jsx)(u,{imageSrc:e,onReset:()=>{t(null)}})}):(0,c.jsxs)(n.P.div,{className:"upload-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,c.jsx)("h1",{className:"tool-title",children:"Upload Your Image"}),(0,c.jsx)("p",{className:"tool-desc",children:"Choose an image from your device or paste an image URL to start editing instantly."}),(0,c.jsx)(d,{onImageLoad:e=>{t(e)}})]})})})}},905:()=>{}}]);
//# sourceMappingURL=326.0560154b.chunk.js.map